name: GPT-OSS via Hugging Face Inference API

on:
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout your repo
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install dependencies
        run: npm install openai

      - name: Call GPT-OSS 20B via Hugging Face API
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: |
          node <<'EOF'
          import OpenAI from "openai";

          const client = new OpenAI({
            baseURL: "https://router.huggingface.co/v1",
            apiKey: process.env.HF_TOKEN,
          });

          const main = async () => {
            const chatCompletion = await client.chat.completions.create({
              model: "openai/gpt-oss-20b:cerebras",
              messages: [{ role: "user", content: "Hello from GitHub Actions" }],
            });
            console.log(chatCompletion.choices[0].message.content);
          };

          main().catch(console.error);
          EOF
